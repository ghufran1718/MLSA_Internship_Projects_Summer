<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Image Gallery</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; text-align: center; }
    input { padding: 8px; width: 250px; }
    button { padding: 8px 12px; margin-left: 5px; }
    .gallery { 
      margin-top: 20px; 
      display: grid; 
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); 
      gap: 15px; 
    }
    img { 
      width: 100%; 
      height: 200px; 
      object-fit: cover; 
      cursor: pointer; 
      border-radius: 8px; 
      box-shadow: 0 2px 6px rgba(0,0,0,0.2); 
    }
    /* Fullscreen modal */
    .modal {
      display: none; 
      position: fixed; 
      top: 0; left: 0; 
      width: 100%; height: 100%; 
      background: rgba(0,0,0,0.8); 
      justify-content: center; 
      align-items: center;
    }
    .modal img { 
      max-width: 90%; 
      max-height: 90%; 
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <h2>Image Gallery</h2>
  <input type="text" id="searchInput" placeholder="Search for images...">
  <button onclick="searchImages()">Search</button>

  <div class="gallery" id="gallery"></div>

  <!-- Fullscreen Modal -->
  <div class="modal" id="modal" onclick="closeModal()">
    <img id="modalImg">
  </div>

  <script>
    const accessKey = "YOUR_UNSPLASH_ACCESS_KEY"; // replace with your Unsplash API key
    const gallery = document.getElementById("gallery");
    const modal = document.getElementById("modal");
    const modalImg = document.getElementById("modalImg");

    async function searchImages() {
      const query = document.getElementById("searchInput").value.trim();
      if (!query) return;

      gallery.innerHTML = "<p>Loading...</p>";

      try {
        const response = await fetch(`https://api.unsplash.com/search/photos?query=${query}&per_page=20&client_id=${accessKey}`);
        const data = await response.json();

        gallery.innerHTML = "";
        data.results.forEach(imgData => {
          const img = document.createElement("img");
          img.dataset.src = imgData.urls.small; // lazy load
          img.alt = imgData.alt_description || "Image";
          img.addEventListener("click", () => openModal(imgData.urls.full));
          gallery.appendChild(img);
        });

        lazyLoadImages();
      } catch (err) {
        gallery.innerHTML = "<p style='color:red;'>Error loading images</p>";
      }
    }

    // Lazy Loading with IntersectionObserver
    function lazyLoadImages() {
      const images = document.querySelectorAll("img[data-src]");
      const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            img.removeAttribute("data-src");
            observer.unobserve(img);
          }
        });
      });

      images.forEach(img => observer.observe(img));
    }

    // Open modal
    function openModal(src) {
      modal.style.display = "flex";
      modalImg.src = src;
    }

    // Close modal
    function closeModal() {
      modal.style.display = "none";
      modalImg.src = "";
    }
  </script>
</body>
</html>
